# Pricing

## Business rule description

[The General workflow of the pricing](https://miro.com/app/board/uXjVMuHE5i8=/)

<figure><img src="../../../.gitbook/assets/Pricing - General Workflow.jpg" alt=""><figcaption><p>General workflowof the pricing<a href="https://app.gitbook.com/o/-MAz0PPl5s9ulE9xyliu/s/eRh5ljXXvELkmmdiRmg8/~/changes/755/functional-documentation/business-rules/pricing/part-3-taxes">Part 3 : Taxes</a></p></figcaption></figure>

This [sheet-pricing ](https://docs.google.com/spreadsheets/d/1yHwk9nc1Ab9T6s-fqybFpm6P8ejGac-SpO6miR39uOY/edit#gid=538880055)let to simulate the main cases taking into account :&#x20;

[Part 1 : Calculation in the catalogue before addind products in the cart](https://app.gitbook.com/o/-MAz0PPl5s9ulE9xyliu/s/eRh5ljXXvELkmmdiRmg8/\~/changes/754/functional-documentation/business-rules/pricing/part-1-calculation-in-the-catalogue-before-addind-products-in-the-cart)

[Part 2 : Discount in the cart](https://app.gitbook.com/o/-MAz0PPl5s9ulE9xyliu/s/eRh5ljXXvELkmmdiRmg8/\~/changes/755/functional-documentation/business-rules/pricing/part-2-discount-in-the-cart)

[Part 3 : Taxes](https://app.gitbook.com/o/-MAz0PPl5s9ulE9xyliu/s/eRh5ljXXvELkmmdiRmg8/\~/changes/755/functional-documentation/business-rules/pricing/part-3-taxes)

Part 4 Display of the chart in the FO (put this part in UX/UI



### UX/UI impact of this BR

todo



<table><thead><tr><th width="113">US</th><th>Descpription</th><th>Examples</th></tr></thead><tbody><tr><td><mark style="color:purple;">MOCCT-001</mark></td><td><mark style="color:purple;">MOCCT-001 : For one article, Quantity 1, Without Ecotax, Price without decimal point, without reduction, fixed VAT, no shipping</mark></td><td><mark style="color:purple;">Examples for the case MOCCT-001. Click</mark> <a href="https://docs.google.com/spreadsheets/d/1yHwk9nc1Ab9T6s-fqybFpm6P8ejGac-SpO6miR39uOY/edit#gid=0"><mark style="color:purple;">here</mark></a></td></tr><tr><td><mark style="color:orange;">MOCCT-002</mark></td><td><mark style="color:orange;">MOCCT_001 for a product with more than one for quantity - without decimal and rounding</mark></td><td><mark style="color:orange;">Examples for the case MOCCT-002</mark>      <a href="https://docs.google.com/spreadsheets/d/1yHwk9nc1Ab9T6s-fqybFpm6P8ejGac-SpO6miR39uOY/edit#gid=43061852"><mark style="color:orange;">Click here</mark></a></td></tr><tr><td><mark style="color:green;">MOCCT_003</mark></td><td><mark style="color:green;">MOCCT_002 with rational number only</mark></td><td><mark style="color:green;">Examples for the case MOCCT-003</mark> <a href="https://docs.google.com/spreadsheets/d/1yHwk9nc1Ab9T6s-fqybFpm6P8ejGac-SpO6miR39uOY/edit#gid=1249928607"><mark style="color:green;">Click here</mark></a></td></tr><tr><td><mark style="color:red;">MOCCT_004</mark></td><td><mark style="color:red;">MOCCT- 004 : Case without reduction for differents articles with a quantity > 1/ fixed VAT/with rational numbers</mark></td><td><mark style="color:red;">Examples for the case MOCCT-004</mark> <a href="https://docs.google.com/spreadsheets/d/1yHwk9nc1Ab9T6s-fqybFpm6P8ejGac-SpO6miR39uOY/edit#gid=1249928607"><mark style="color:red;">Click here</mark></a></td></tr><tr><td><mark style="background-color:blue;">MOCCT_005</mark></td><td><mark style="background-color:blue;">[US-Pricing][MOC] : MOCCT- 005 : Round product with different round modes and precisions</mark></td><td><mark style="background-color:blue;">Examples for the case MOCCT-005</mark><a href="http://127.0.0.1:5000/s/jyL8OZq59yY3Nomb341u/user-guide/connecting-back-office"> </a></td></tr></tbody></table>

<table><thead><tr><th width="94">Level</th><th>Formula</th></tr></thead><tbody><tr><td><mark style="color:purple;">1</mark></td><td><h4><mark style="color:purple;">Step_SP</mark></h4><p><mark style="color:purple;">Description : Retrieve the standard price for </mark><del><mark style="color:purple;">one</mark></del> <mark style="color:red;">each</mark> <mark style="color:purple;">product (SP)</mark> </p><p><mark style="color:purple;">Formula : NA</mark></p><p><mark style="color:purple;">US : MOCCT-001,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_IP</mark></h4><p><mark style="color:purple;">Description : Retrieve the impact Price (IP)</mark> <mark style="color:red;">for each product</mark></p><p><mark style="color:purple;">Formula : NA</mark></p><p><mark style="color:purple;">US : MOCCT-001,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_CP</mark></h4><p><mark style="color:purple;">Description : Calculation of the price of the combination HT (CP)</mark> <mark style="color:red;">for each product</mark></p><p><mark style="color:purple;">Formula : CP = SP + IP</mark></p><p><mark style="color:purple;">US : MOCCT-001,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_CP_Q</mark></h4><p><mark style="color:purple;">Description : Calculation of the price total (Tax excl) taking into account quantity (which is 1 for the MOCCT-001)</mark> <mark style="color:red;">for each product</mark></p><p><mark style="color:purple;">Formula : CP_Q = CP * 1</mark></p><p><mark style="color:purple;">US : MOCCT-001,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_RVAT</mark> </h4><p><mark style="color:purple;">Description : Recovery of rate of VAT (RVAT)</mark> </p><p><mark style="color:purple;">Formula :  For now ARBITRARY fixed to 20% </mark><del><mark style="color:purple;">to dig into the specifications (Country, state, zip code) -</mark></del></p><p><mark style="color:purple;">US : MOCCT-001</mark></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_Total_Taxes_excluded</mark></h4><p><mark style="color:purple;">Description : Calculation of total taxes excluded (Total_Taxes_excluded)</mark> <mark style="color:red;">for all products</mark></p><p><mark style="color:purple;">Formula : The quantity Q is consider to 1 arbitrary</mark></p><p> <mark style="color:purple;">Total_Taxes_excluded = Step_CP_Q</mark>                    </p><p> <del><mark style="color:red;">For all products</mark> <mark style="color:orange;">Total_Taxes_excluded =</mark> <mark style="color:red;">For all products sum of</mark> <mark style="color:orange;">Q * CP</mark></del>     </p><p><mark style="color:purple;">US : MOCCT-001,</mark> <del><mark style="color:orange;">MOCCT-002,</mark> <mark style="color:red;">MOCCT_004</mark></del></p></td></tr><tr><td>2</td><td><h4><mark style="color:purple;">Step_AmountTVATaxExcluded</mark></h4><p><mark style="color:purple;">Description : Calculation of VAT amount on unit price before tax (AmountTVATaxExcluded)</mark> <mark style="color:red;">for each product</mark> </p><p><mark style="color:purple;">Formula</mark> <mark style="color:red;">:</mark> <mark style="color:purple;">AmountTVATaxExcluded = RVAT * CP</mark></p><p><mark style="color:purple;">US  : MOCCT-001,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td></td><td><h4><mark style="color:orange;">Step_Quantity_Recovery</mark> </h4><p><mark style="color:orange;">Description : Recovery of the quantit√© of CP (Q)</mark> <mark style="color:red;">for each product</mark></p><p><mark style="color:orange;">Formule : NA</mark></p><p><mark style="color:orange;">US : MOCCT-002,</mark> <mark style="color:red;">MOCCT_004</mark></p></td></tr><tr><td></td><td><h4><del><mark style="background-color:blue;">Step_Round_item</mark></del></h4><p><del><mark style="background-color:blue;">Description : It exist 6 round modes</mark></del></p><p><del><mark style="background-color:blue;">Formule : This mode have to be applicated on</mark></del> <del><mark style="background-color:red;">Step_CP or Step_RVAT ?</mark></del></p><p><del><mark style="background-color:blue;">US : MOCCT-005</mark></del></p></td></tr><tr><td></td><td><h4></h4></td></tr><tr><td></td><td><h4><del><mark style="color:purple;">Step_Shipping_costs</mark></del> </h4><p><del><mark style="color:purple;">Description : Recovery of Shipping cost Taxes excluded (Shipping_costs)</mark></del></p><p><del><mark style="color:purple;">Formule : Recovery of Shipping cost Taxes excluded (Shipping_costs)</mark></del></p><p><del><mark style="color:purple;">US : MOCCT-001</mark></del></p></td></tr><tr><td></td><td><h4><del><mark style="color:purple;">Step_Line_Tax_Excluded_with_Shipping_costs</mark></del></h4><p><del><mark style="color:purple;">Description : Calculation tax excluded of the total with shipping costs (Total_Tax_Excluded_with_Shipping_costs)</mark></del></p><p><del><mark style="color:purple;">Formule :</mark></del> </p><p><del><mark style="color:purple;">Line_Tax_Excluded_with_Shipping_costs</mark></del> </p><p><del><mark style="color:purple;"><strong>=</strong></mark> <mark style="color:red;">(</mark><mark style="color:purple;">CP * (1</mark> <mark style="color:orange;">Q</mark><mark style="color:purple;">+ RVAT + Shipping_costs)</mark><mark style="color:red;">)</mark></del></p><p></p><p><del><mark style="color:purple;">US : MOCCT-001,</mark> <mark style="color:orange;">MOCCT-002</mark></del></p></td></tr><tr><td></td><td><h4><mark style="color:purple;">Step_Total_Taxes_included</mark></h4><p><mark style="color:purple;">Description : Calculation of total taxes included(Total_Taxes_excluded)</mark> <del><mark style="color:red;">for all products</mark></del></p><p><mark style="color:purple;">Formula :</mark></p><p> <mark style="color:purple;">Total_Taxes_included =  Step_Total_Taxes_excluded + AmountTVATaxExcluded</mark>                    </p><p> <del><mark style="color:red;">For all products</mark> <mark style="color:orange;">Total_Taxes_excluded =</mark> <mark style="color:red;">For all products sum of</mark> <mark style="color:orange;">Q * CP</mark></del>     </p><p><mark style="color:purple;">US : MOCCT-001,</mark> <del><mark style="color:orange;">MOCCT-002,</mark> <mark style="color:red;">MOCCT_004</mark></del></p></td></tr><tr><td></td><td><h4><mark style="color:red;">Step_total</mark></h4><p><mark style="color:red;">Description :</mark> </p><p><mark style="color:red;">Formule : Sum for each products of Step_Line_Tax_Excluded_with_Shipping_costs</mark></p><p></p><p><mark style="color:red;">US : Sum for each products of Step_Line_Tax_Excluded_with_Shipping_costs</mark></p></td></tr></tbody></table>

### Behat test link
